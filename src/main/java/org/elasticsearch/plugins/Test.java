package org.elasticsearch.plugins;

import java.util.Arrays;
import java.util.List;

/**
 * @Author luorenshu(626115221 @ qq.com)
 * @date 2018/11/7 下午4:10
 **/
public class Test {

    public static void main(String[] args){
        calculate();
    }

    public static void calculate(){
        String str = "翡翠挂件/喜上眉梢";
        System.out.println(str.length());
        int len = 30;
//        int len = str.length();


        System.out.println(1/Math.log(len+4) + 0.4);
    }

    public static void dot(){
        List<Double> queryVector = Arrays.asList(0.46637216, -0.49901372, 2.0669658, -1.9191614, -2.9325688, 4.0868936, 0.63124245, -0.41968167, 2.717821, 0.32261473, -0.46774703, -3.187079, 1.785136, 0.25431108, -0.5632627, -0.77819145, 1.6952345, 1.0514163, 0.15093213, 0.2832321, 0.15190862, -3.1771727, 1.1223906, -1.5799534, 3.2785928, 2.0737145, -0.98031026, 1.4585768, -3.7188401, -0.56974804, -2.2633443, 2.125212, -0.021725206, -0.4566323, 4.198397, 0.9062475, -1.2018604, -0.85990614, 0.51357776, 3.284479, 0.9241978, 2.0804, -0.28531027, 2.995117, -2.014433, -4.149889, -0.17382698, -3.2022085, 2.4203968, -0.6215358, -1.0127333, 0.80116254, 2.988431, -0.69544506, 0.24266976, 0.38969925, 1.2854354, 1.6639087, -2.5127914, 2.5022564, -0.49572986, 1.0793201, -0.41486412, -1.1328024, 1.5799136, -2.0868173, -2.765183, 2.0972476, -0.48831767, 3.1253934, -0.034392968, 0.03765407, -0.024366733, -0.32089475, -1.639158, -1.5162863, 1.4130354, -0.044008855, 3.5029101, -0.9813866, -0.14249945, -1.7165657, 3.677409, -1.2978953, 0.24278805, 2.0088828, -3.1161938, -0.84374636, 1.5613465, 0.83180314, -1.6513664, -1.4911424, -2.2152627, 1.5428302, 3.3058789, -1.078524, -0.56541765, 0.3349039, 0.95719886, -1.3544737, 1.4367888, -1.679225, 0.537139, -0.41738188, -1.2543128, -0.88548726, -0.38250253, 0.5156547, 1.6101773, 5.175682, 0.4068043, -0.26415652, -1.2680488, -2.3345351, -1.012284, -1.5150536, 1.443057, 1.1583636, 0.28492996, -0.0281321, 0.095881894, 2.0472093, 1.1292073, 2.8839712, 2.7886388, 3.7862737, -1.67678, 1.5861354, -3.81697, 2.6529834, -0.3536208, -2.1002357, 1.2870603, -0.4954139, -0.49203607, 3.6179037, 0.21756952, 1.227512, -0.34973246, -2.422351, -0.15345854, 2.2770033, -0.16033423, 1.7666667, -1.4070653, 1.7549733, 1.3597438, 1.8203001, 3.7288733, 0.9348146);
        List<Double> vector = Arrays.asList(-1.4150438,0.36942616,0.14970404,-0.6120383,-1.1786251,2.2293556,-0.32284793,-0.22602503,2.5027726,-0.39691266,-0.66878426,-1.4302199,1.704396,0.16603178,-0.72862756,0.17027986,0.9577817,0.5735552,0.42076403,0.066038065,0.5669634,-1.1818691,1.8790066,-0.7009339,0.8464822,1.2409756,-0.9092034,1.1110291,-2.9749675,-0.18250805,-0.8353261,1.356001,-0.22894509,-0.38005897,2.4612944,1.3299191,-0.7764935,-1.151065,-0.6166909,2.1649418,1.3916154,1.6898276,-0.603864,1.8515736,-1.4021499,-2.062425,-1.2329558,-2.3116264,0.16118538,-0.6828346,-0.8254193,0.30070037,1.8350617,-0.8615145,0.9155183,-0.41956675,-0.12136358,1.0520327,-1.2268295,2.046178,-0.5870296,1.0028063,0.013037056,-0.34649575,0.6689105,-0.5732827,-2.5275252,1.3089335,-0.5400141,2.462015,0.3934347,0.6199026,0.70616394,-0.110444054,-0.31719953,-0.87287515,0.46520692,0.19453219,1.0329792,-0.16978139,-0.570946,-1.6367021,2.428287,-1.281518,-0.9158131,1.1652362,-2.349145,-0.44991705,0.4686632,-0.4249988,-1.0871546,-1.1667252,-0.9227275,0.50512123,2.428535,-0.9247067,-0.8107453,-0.07965621,0.09591478,-0.32110757,1.1719271,-1.0814514,0.27603835,-0.043585837,-0.1977123,-1.2491835,-0.263736,0.6894795,1.2905155,3.425079,0.42563277,-0.13079217,-1.481662,-2.4052167,-1.2133532,-1.3597654,0.43202838,0.36231655,0.80039495,0.025911314,-0.08187572,0.2739967,0.2076562,1.3635345,0.43530643,2.1320395,-0.27348334,0.034709573,-1.4497119,1.3237249,1.2902057,-1.0626429,1.0371747,1.172821,0.39437276,1.9171112,-0.39231154,1.9571135,0.47972944,-1.6060567,-0.89451337,2.1409273,-0.08029407,0.73897403,-1.3300076,2.1331613,0.23883513,2.1548462,2.2408812,-0.18835175);

        int size = Math.min(queryVector.size(), vector.size());

        double sum1 = 0, sum2 = 0, queryValue=0, fieldValue=0, dot=0, score=0;
        for (int i = 0; i < size; i++) {
            queryValue = queryVector.get(i);
            fieldValue = vector.get(i);
            dot += queryValue * fieldValue;
            sum1 += queryValue * queryValue;
            sum2 += fieldValue * fieldValue;
        }

        double denominator = (Math.sqrt(sum1) * Math.sqrt(sum2));
        if (denominator == 0){
            score = 0;
        }else{
            score = dot / denominator;
        }

        System.out.println(vector);
        System.out.println(queryValue);
        System.out.println("sum1 :" + sum1);
        System.out.println("sum2 :" + sum2);
        System.out.println("dot : " + dot);
        System.out.println("denominator :" + denominator);
        System.out.println("score :" + score);
    }
}
